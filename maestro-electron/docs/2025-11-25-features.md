# Maestro Feature Sprint - November 25, 2025

## Overview

Major feature additions to transform Maestro into a profile-based, AI-powered workspace browser.

---

## Feature 1: Profiles (Arc-style)

### Concept
Profiles are the top-level organizational unit, above Spaces. They isolate:
- Browser data (cookies, localStorage, sessions)
- Passwords/credentials
- Configuration/preferences
- Connected apps

### Use Cases
- **Personal profile** - personal browsing, personal accounts
- **Work profile (Roadie)** - work accounts, work-specific apps
- **Client profiles** - isolated environments per client
- **Over-employed scenarios** - complete separation between jobs

### Architecture
```
Profile
├── Settings (theme, preferences)
├── Credentials (encrypted password store)
├── Browser Data (isolated Electron session)
└── Spaces[]
    └── Tabs[]
```

### Implementation Plan
1. Define types (`src/types/profile.ts`)
2. Create profile store with persistence
3. Add profile selector UI (top-level, above dock)
4. Implement Electron session isolation per profile
5. Migrate spaces to belong to profiles
6. Add profile CRUD UI

---

## Feature 2: Playwright MCP Server

### Purpose
Enable Claude to see the UI via screenshots for better design decisions.

### Setup
1. Install Playwright
2. Install MCP Playwright server
3. Configure in Claude Code settings

### Benefits
- Visual feedback on UI changes
- Screenshot-driven development
- Automated UI testing capability

---

## Feature 3: Browser Import (Deferred)

Import configuration and passwords from:
- Chrome
- Firefox
- Arc
- Safari

*Parking this for later.*

---

## Feature 4: Chrome Extensions

### Feasibility
Electron supports Chrome extensions via `session.loadExtension()`:
- Extensions from Chrome Web Store (CRX files)
- Manifest V2 and V3 support
- Some APIs not available (depends on extension)

### Implementation Plan
1. Add extension management UI
2. Implement extension loading per profile
3. Handle extension permissions
4. Persist enabled extensions

### Limitations
- Some Chrome APIs not available in Electron
- Extensions requiring native messaging need extra work
- Some extensions may not work fully

---

## Feature 5: AI Chat per Workspace

### Template
Use Vercel's AI Chatbot (https://github.com/vercel/ai-chatbot) as reference.

### Features
- Chat interface per workspace
- Context-aware (knows about tabs, spaces, history)
- Can execute actions via API
- Persistent conversation history

### Architecture
```
Chat System
├── Chat UI Component (sidebar or panel)
├── Message Store (per workspace)
├── Context Provider (workspace state)
├── Action Executor (API calls)
└── AI Backend (Claude API)
```

### Context to Provide
- Current workspace structure (spaces, tabs)
- Open URLs and their content
- User history and decisions
- Available actions (API endpoints)

---

## Feature 6: API-First Architecture

### Goal
Expose all Maestro functionality via internal API so that:
- AI Chat can execute actions
- External tools can integrate
- Automation is possible

### API Categories
```typescript
// Workspace API
createSpace(profileId, name): Space
deleteSpace(spaceId): void
createTab(spaceId, type, config): Tab
closeTab(tabId): void
moveTab(tabId, targetSpaceId): void

// Profile API
createProfile(name): Profile
switchProfile(profileId): void
getActiveProfile(): Profile

// Browser API
navigate(tabId, url): void
goBack(tabId): void
goForward(tabId): void

// Launcher API
launchApp(appId, config): void
addConnectedApp(path): ConnectedApp

// Chat API
sendMessage(workspaceId, message): Response
getHistory(workspaceId): Message[]
```

### Implementation
1. Define API types/interfaces
2. Create API handler layer
3. Expose via IPC for internal use
4. Optionally expose via HTTP for external tools

---

## Execution Order

### Phase 1: Foundation (Today)
1. [x] ~~Bug fixes from morning~~ ✅
2. [ ] **Playwright setup** - enables visual development
3. [ ] **Profile types and store** - foundation for everything

### Phase 2: Profile System
4. [ ] Profile UI (selector, management)
5. [ ] Electron session isolation
6. [ ] Migrate spaces to profiles

### Phase 3: API Layer
7. [ ] Define API interfaces
8. [ ] Implement API handlers
9. [ ] Wire up existing actions to API

### Phase 4: AI Chat
10. [ ] Chat UI component
11. [ ] AI integration (Claude)
12. [ ] Context provider
13. [ ] Action execution

### Phase 5: Extensions
14. [ ] Extension loading
15. [ ] Extension management UI
16. [ ] Per-profile extension storage

---

## Notes

- Profiles require careful data isolation (IndexedDB, localStorage, cookies)
- Chrome extensions have varying compatibility with Electron
- API design should be action-based for AI consumption
- Chat context window management is important for cost
